<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Stock Price Forecast</title>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
<link rel="stylesheet" href="{{static_url('css/style.css')}}">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script type="text/javascript">

Highcharts.setOptions({
        lang: {
                rangeSelectorZoom: ''
        }
});

$.getJSON('/static/data/tsla.json', function (data) {
        data = data.data;
        var ohlc = [],
                volume = [],
                dataLength = data.length,
                // set the allowed units for data grouping
                groupingUnits = [[
                        'day',                         // unit name
                        [1]                             // allowed multiples
                ], [
                        'month',
                        [1, 2, 3, 4, 6]
                ]],
                i = 0;
        for (i; i < dataLength; i += 1) {
                ohlc.push([
                        data[i][0], // the date
                        data[i][1], // open
                        data[i][2], // high
                        data[i][3], // low
                        data[i][4] // close
                ]);
                volume.push([
                        data[i][0], // the date
                        data[i][5] // the volume
                ]);
        }
        // create the chart
        var chart = Highcharts.stockChart('candlestick', {
                rangeSelector: {
                        selected: 1,
                        inputDateFormat: '%Y-%m-%d'
                },
                title: {
                        text: 'Tesla Stock Daily Candlestick Chart'
                },
                xAxis: {
                        dateTimeLabelFormats: {
                                millisecond: '%H:%M:%S.%L',
                                second: '%H:%M:%S',
                                minute: '%H:%M',
                                hour: '%H:%M',
                                day: '%m-%d',
                                week: '%m-%d',
                                month: '%y-%m',
                                year: '%Y'
                        }
                },
                tooltip: {
                        split: false,
                        shared: true,
                },
                yAxis: [{
                        labels: {
                                align: 'right',
                                x: -3
                        },
                        title: {
                                text: 'Price'
                        },
                        height: '65%',
                        resize: {
                                enabled: true
                        },
                        lineWidth: 2
                }, {
                        labels: {
                                align: 'right',
                                x: -3
                        },
                        title: {
                                text: 'Volumn'
                        },
                        top: '65%',
                        height: '35%',
                        offset: 0,
                        lineWidth: 2
                }],
                series: [{
                        type: 'candlestick',
                        name: 'Tesla',
                        id: 'tesla',
                        color: 'green',
                        lineColor: 'green',
                        upColor: 'red',
                        upLineColor: 'red',
                        tooltip: {
                        },
                        navigatorOptions: {
                                color: Highcharts.getOptions().colors[0]
                        },
                        data: ohlc,
                        dataGrouping: {
                                units: groupingUnits
                        },
                        id: 'sz'
                },{
                        type: 'column',
                        name: 'Volume',
                        data: volume,
                        yAxis: 1,
                        dataGrouping: {
                                units: groupingUnits
                        }
                }]
        });
});

</script>

</head>
<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Stock Price Forecast</a>
        </div>
      </div>
    </nav>

    <div id="realtimeprice"></div>

    <div id="candlestick"></div>
    <div id="forecastleft"></div>>
    <div id="forecastright">
        <table style="width:100%">
          <tr>
            <th>Variable</th>
            <th>Flag</th> 
            <th>Accuracy</th>
            <th>IfHold</th>
          </tr>
        {% for dt in datas%}
          <tr>
              <td>{{dt.name}}</td>
              <td>{{dt.flag}}</td>
              <td>{{dt.accuracy}}</td>
              <td>{{dt.gain_chance}}</td>
          </tr> 
        {% end %}
        </table>
    </div>  



</body>
</html>